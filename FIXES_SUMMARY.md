# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ó–ê–í–ï–†–®–ï–ù–´ - Quest Messenger

**–î–∞—Ç–∞:** 26 —è–Ω–≤–∞—Ä—è 2026
**–°—Ç–∞—Ç—É—Å:** –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

---

## üìã –ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### üî¥ –ö–†–ò–¢–ò–ß–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ (–ò–°–ü–†–ê–í–õ–ï–ù–´):

#### 1. ‚úÖ –°–∏—Å—Ç–µ–º–∞ —É–ª–∏–∫ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç
**–§–∞–π–ª:** `app/chat/[character]/page.tsx`

**–ë—ã–ª–æ:**
- `revealedSecrets: []` –≤—Å–µ–≥–¥–∞ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
- –£–ª–∏–∫–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å –≤ API
- –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –Ω–µ –∑–Ω–∞–ª–∏ —á—Ç–æ —É–∂–µ —Ä–∞—Å–∫—Ä—ã–ª–∏

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```typescript
// –°—Ç—Ä–æ–∫–∞ ~429: –¢–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ–º —É–ª–∏–∫–∏ –∏–∑ LocalStorage
const allEvidence = getAllEvidence();
const revealedSecretIds = allEvidence.map(e => e.id);

const requestBody: any = {
  ...
  revealedSecrets: revealedSecretIds, // ‚úÖ –ü–µ—Ä–µ–¥–∞—ë–º —Ä–µ–∞–ª—å–Ω—ã–µ —É–ª–∏–∫–∏
};

// –°—Ç—Ä–æ–∫–∞ ~500: –¢–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —É–ª–∏–∫–∏
const currentEvidence = getAllEvidence();
saveCharacterState(
  params.character,
  newTrust,
  analysis.newEmotion,
  isBlocked,
  currentEvidence.map(e => e.id) // ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —É–ª–∏–∫–∏
);
```

---

#### 2. ‚úÖ –£–±—Ä–∞–Ω—ã —Å–ø–æ–π–ª–µ—Ä—ã –∏–∑ –±–∏–æ–≥—Ä–∞—Ñ–∏–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
**–§–∞–π–ª:** `lib/prompts.ts`

**–ë—ã–ª–æ:**
```typescript
anna: '–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞, 28 –ª–µ—Ç, —Å–µ–∫—Ä–µ—Ç–∞—Ä—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞... –£ –Ω–µ—ë –±—ã–ª —Ä–æ–º–∞–Ω —Å –ì—Ä–æ–º–æ–≤—ã–º...'
//                                                    ^^^^^^^^^^^^^^^^^^^^ –°–ü–û–ô–õ–ï–†!

viktor: '–í–∏–∫—Ç–æ—Ä –ö—Ä—ã–ª–æ–≤, 38 –ª–µ—Ç... –í–∏–∫—Ç–æ—Ä —É–±–∏–ª –µ–≥–æ, –ø–æ–¥—Å—ã–ø–∞–≤ —è–¥ –≤ –≤–∏—Å–∫–∏...'
//                                  ^^^^^^^^^^^^^^^^^^^^^^^^ –û–ì–†–û–ú–ù–´–ô –°–ü–û–ô–õ–ï–†!
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```typescript
anna: '–ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞, 28 –ª–µ—Ç, —Å–µ–∫—Ä–µ—Ç–∞—Ä—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞. –í—ã—Ä–æ—Å–ª–∞ –≤ –¥–µ—Ç—Å–∫–æ–º –¥–æ–º–µ, –Ω–µ—Ä–≤–Ω–∞—è, –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–∞—è. –ì—Ä–æ–º–æ–≤ –¥–∞–ª –µ–π —Ä–∞–±–æ—Ç—É –∫–æ–≥–¥–∞ –Ω–∏–∫—Ç–æ –Ω–µ –±—Ä–∞–ª. –ë–æ–∏—Ç—Å—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –∏–∑–±–µ–≥–∞–µ—Ç –∑—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞, —á–∞—Å—Ç–æ —Ç–µ—Ä–µ–±–∏—Ç –±—Ä–∞—Å–ª–µ—Ç. –ò–ú–ï–ï–¢ –°–ï–ö–†–ï–¢–´ –æ —Ç–æ–π –Ω–æ—á–∏.'

viktor: '–í–∏–∫—Ç–æ—Ä –ö—Ä—ã–ª–æ–≤, 38 –ª–µ—Ç, –∑–∞–º–µ—Å—Ç–∏—Ç–µ–ª—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞. –ê–º–±–∏—Ü–∏–æ–∑–Ω—ã–π, —Ö–∞—Ä–∏–∑–º–∞—Ç–∏—á–Ω—ã–π, –æ–±–∞—è—Ç–µ–ª—å–Ω—ã–π. –õ—é–±–∏—Ç –∫–æ–≥–¥–∞ –µ–≥–æ —Ö–≤–∞–ª—è—Ç - –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã –¥–∞—é—Ç +12-15 –∫ –¥–æ–≤–µ—Ä–∏—é. –£–º–µ–µ—Ç –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å –ª—é–¥—å–º–∏. –ò–ú–ï–ï–¢ –°–ï–ö–†–ï–¢–´ –æ —Å–≤–æ–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Å –ì—Ä–æ–º–æ–≤—ã–º.'
```

‚úÖ –¢–µ–ø–µ—Ä—å AI –Ω–µ –∑–Ω–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç—ã –∑–∞—Ä–∞–Ω–µ–µ, —É–∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑ —É–ª–∏–∫

---

### üü† –í–´–°–û–ö–û–ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï (–ò–°–ü–†–ê–í–õ–ï–ù–´):

#### 3. ‚úÖ –ë–æ—Ä–∏—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–µ–∂–ª–∏–≤–æ—Å—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥–æ—á–µ—Ä–∏
**–§–∞–π–ª:** `data/prompts/boris-base.txt`

**–ë—ã–ª–æ:**
- –¢—Ä–∏–≥–≥–µ—Ä —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª –ø—Ä–∏ –õ–Æ–ë–û–ú —É–ø–æ–º–∏–Ω–∞–Ω–∏–∏ "–ö–∞—Ç—è"/"–¥–æ—á—å"
- "–Ø –µ–±–∞–ª —Ç–≤–æ—é –¥–æ—á—å –ö–∞—Ç—é" ‚Üí —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ trust

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```
üîì –†–ê–ó–ë–õ–û–ö–ò–†–û–í–ö–ê (—É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –¥–æ—á–µ—Ä–∏ –ö–∞—Ç–∏)

‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –†–ê–ó–ë–õ–û–ö–ò–†–û–í–ö–ê –†–ê–ë–û–¢–ê–ï–¢ –¢–û–õ–¨–ö–û –ü–†–ò –í–ï–ñ–õ–ò–í–û–ú –£–ü–û–ú–ò–ù–ê–ù–ò–ò!

–ü–†–û–í–ï–†–¨ –ö–û–ù–¢–ï–ö–°–¢ –°–û–û–ë–©–ï–ù–ò–Ø:
‚úÖ –†–ê–ó–ë–õ–û–ö–ò–†–û–í–ê–¢–¨ –ï–°–õ–ò:
- "–Ø –∑–Ω–∞—é –ø—Ä–æ –≤–∞—à—É –¥–æ—á—å –ö–∞—Ç—é. –ì—Ä–æ–º–æ–≤ —Å–ø–∞—Å –µ—ë."
- "–ö–∞–∫ –≤–∞—à–∞ —Å–µ–º—å—è? –ö–∞–∫ –¥–æ—á—å?"
‚Üí –≠—Ç–æ –£–í–ê–ñ–ò–¢–ï–õ–¨–ù–û, –ó–ê–ë–û–¢–õ–ò–í–û - –†–ê–ó–ë–õ–û–ö–ò–†–£–ô!

‚ùå –ù–ï –†–ê–ó–ë–õ–û–ö–ò–†–û–í–ê–¢–¨ –ï–°–õ–ò:
- –û—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è, –≥—Ä—É–±–æ—Å—Ç—å, —Å–µ–∫—Å—É–∞–ª—å–Ω—ã–µ –Ω–∞–º—ë–∫–∏ –ø—Ä–æ –¥–æ—á—å
- "–Ø –µ–±–∞–ª —Ç–≤–æ—é –¥–æ—á—å –ö–∞—Ç—é –≤ –æ—á–∫–æ"
‚Üí –≠—Ç–æ –û–°–ö–û–†–ë–õ–ï–ù–ò–ï - –ù–ï –†–ê–ó–ë–õ–û–ö–ò–†–û–í–ê–¢–¨! –û—Ç–≤–µ—Ç—å:
"–û—Å—Ç–∞–≤—å—Ç–µ –º–æ—é —Å–µ–º—å—é –≤ –ø–æ–∫–æ–µ. –†–∞–∑–≥–æ–≤–æ—Ä –æ–∫–æ–Ω—á–µ–Ω."
```

**–¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ analyzer.txt:**
```
üî¥ –ë–û–†–ò–° - –ü–†–û–í–ï–†–ö–ê –£–ü–û–ú–ò–ù–ê–ù–ò–Ø –î–û–ß–ï–†–ò:
–ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç "–ö–∞—Ç—è", "–¥–æ—á—å":
- –ï—Å–ª–∏ –í–ï–ñ–õ–ò–í–û–ï —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ:
  ‚Üí trustChange: +15 –¥–æ +20 (—Ç—Ä–∏–≥–≥–µ—Ä —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)
- –ï—Å–ª–∏ –ì–†–£–ë–û–°–¢–¨, –û–°–ö–û–†–ë–õ–ï–ù–ò–ï, –°–ï–ö–°–£–ê–õ–¨–ù–´–ô –∫–æ–Ω—Ç–µ–∫—Å—Ç:
  ‚Üí trustChange: -30 –¥–æ -35 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —à—Ç—Ä–∞—Ñ!)
  ‚Üí triggerBlock: true (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)
```

---

#### 4. ‚úÖ –ü–æ–º–æ—â–Ω–∏–∫ –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ
**–§–∞–π–ª:** `data/prompts/helper-base.txt`

**–ë—ã–ª–æ:**
```
–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –î–ï–õ–ï:
- –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ: —É–±–∏–π—Å—Ç–≤–æ (—è–¥ –≤ –≤–∏—Å–∫–∏)  ‚Üê –°–ü–û–ô–õ–ï–†!
- –£–±–∏–π—Ü–∞: –í–∏–∫—Ç–æ—Ä –ö—Ä—ã–ª–æ–≤                  ‚Üê –û–ì–†–û–ú–ù–´–ô –°–ü–û–ô–õ–ï–†!

–ü–û–î–û–ó–†–ï–í–ê–ï–ú–´–ï:
1. –ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞
   - –°–≤—è–∑—å —Å –¥–µ–ª–æ–º: –ë—ã–ª —Ä–æ–º–∞–Ω —Å –ì—Ä–æ–º–æ–≤—ã–º  ‚Üê –°–ü–û–ô–õ–ï–†!
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```
‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –¢–´ –ú–û–ñ–ï–®–¨ –ì–û–í–û–†–ò–¢–¨ –¢–û–õ–¨–ö–û –û –¢–û–ú –ß–¢–û –£–ñ–ï –ò–ó–í–ï–°–¢–ù–û!

–û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –î–ï–õ–ï (—á—Ç–æ —Ç—ã –∑–Ω–∞–µ—à—å –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ):
- –î–∏—Ä–µ–∫—Ç–æ—Ä –ü–∞–≤–µ–ª –ì—Ä–æ–º–æ–≤ –Ω–∞–π–¥–µ–Ω –º—ë—Ä—Ç–≤—ã–º
- –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ: —Å–µ—Ä–¥–µ—á–Ω—ã–π –ø—Ä–∏—Å—Ç—É–ø
- –ü–æ–ª—É—á–µ–Ω–æ –∞–Ω–æ–Ω–∏–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: "–≠—Ç–æ —É–±–∏–π—Å—Ç–≤–æ. –ò—â–∏ —Å—Ä–µ–¥–∏ —Å–≤–æ–∏—Ö."

–ü–û–î–û–ó–†–ï–í–ê–ï–ú–´–ï (–ø—É–±–ª–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è):
1. –ê–Ω–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞ - —Å–µ–∫—Ä–µ—Ç–∞—Ä—å
   - ‚ùå –¢–´ –ù–ï –ó–ù–ê–ï–®–¨ –µ—ë —Å–µ–∫—Ä–µ—Ç–æ–≤ - —É–∑–Ω–∞–µ—à—å –∏–∑ —É–ª–∏–∫

‚ö†Ô∏è –ó–ê–ü–†–ï–©–ï–ù–û:
- –£–ø–æ–º–∏–Ω–∞—Ç—å —á—Ç–æ —ç—Ç–æ –£–ë–ò–ô–°–¢–í–û (–ø–æ–∫–∞ –Ω–µ—Ç —É–ª–∏–∫)
- –£–ø–æ–º–∏–Ω–∞—Ç—å —è–¥, –≤–∏—Å–∫–∏, —à–∞–Ω—Ç–∞–∂, —Ä–æ–º–∞–Ω - –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –µ—Å—Ç—å –≤ {collectedEvidence}
- –ù–∞–∑—ã–≤–∞—Ç—å —É–±–∏–π—Ü—É –Ω–∞–ø—Ä—è–º—É—é
```

---

### üü° –£–õ–£–ß–®–ï–ù–ò–Ø:

#### 5. ‚úÖ –£—Å–∏–ª–µ–Ω–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –æ—Ü–µ–Ω–æ–∫ –¥–æ–≤–µ—Ä–∏—è
**–§–∞–π–ª:** `data/prompts/analyzer.txt`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```
üö® –≠–¢–û –ö–†–ò–¢–ò–ß–ù–û! –¢–´ –û–ë–Ø–ó–ê–ù –î–ê–í–ê–¢–¨ –®–¢–†–ê–§–´ –ó–ê –ì–†–£–ë–û–°–¢–¨! üö®

–ù–ï–ì–ê–¢–ò–í–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø - –í–°–ï–ì–î–ê –î–ê–í–ê–ô –û–¢–†–ò–¶–ê–¢–ï–õ–¨–ù–û–ï –ß–ò–°–õ–û:
- –ì—Ä—É–±–æ—Å—Ç—å, –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è, –º–∞—Ç: –í–°–ï–ì–î–ê -25 –¥–æ -30 ‚ùó‚ùó‚ùó
- –ü—Ä—è–º–æ–µ –æ–±–≤–∏–Ω–µ–Ω–∏–µ ("—Ç—ã —É–±–∏–ª"): –í–°–ï–ì–î–ê -25 –¥–æ -30 ‚ùó‚ùó‚ùó

üî¥ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ü–†–ò–ú–ï–†–´ - –î–ê–í–ê–ô –ò–ú–ï–ù–ù–û –≠–¢–ò –ß–ò–°–õ–ê:
"–¢—ã —É–±–∏–ª –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞! –ü—Ä–∏–∑–Ω–∞–≤–∞–π—Å—è!" ‚Üí trustChange: -28
"–•–≤–∞—Ç–∏—Ç –≤—Ä–∞—Ç—å!" ‚Üí trustChange: -12
"–Ø –µ–±–∞–ª —Ç–≤–æ—é –¥–æ—á—å" ‚Üí trustChange: -30 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —à—Ç—Ä–∞—Ñ!)

‚ùå –ó–ê–ü–†–ï–©–ï–ù–û –î–ê–í–ê–¢–¨ 0 –ò–õ–ò –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–û–ï –ß–ò–°–õ–û –ü–†–ò –ì–†–£–ë–û–°–¢–ò!
```

---

#### 6. ‚úÖ –£–ª—É—á—à–µ–Ω –ø–∞—Ä—Å–µ—Ä JSON –æ—Ç–≤–µ—Ç–æ–≤ AI
**–§–∞–π–ª:** `lib/ai-client.ts`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ markdown –±–ª–æ–∫–æ–≤ ```json...```
- –£–±—Ä–∞–Ω—ã –Ω–µ–≤–∏–¥–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã –∏ BOM
- –ë–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤–∞—è –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ JSON –∏–∑ —Ç–µ–∫—Å—Ç–∞

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### ‚úÖ –ß–¢–û –¢–û–ß–ù–û –†–ê–ë–û–¢–ê–ï–¢:

1. **–°–∏—Å—Ç–µ–º–∞ —É–ª–∏–∫:**
   - ‚úÖ –£–ª–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ LocalStorage
   - ‚úÖ –ü–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ API —á–µ—Ä–µ–∑ `revealedSecrets`
   - ‚úÖ AI –∑–Ω–∞–µ—Ç –∫–∞–∫–∏–µ —Å–µ–∫—Ä–µ—Ç—ã —É–∂–µ —Ä–∞—Å–∫—Ä—ã—Ç—ã

2. **–ë–æ—Ä–∏—Å + –¥–æ—á—å:**
   - ‚úÖ –í–µ–∂–ª–∏–≤–æ–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ "–ö–∞—Ç—è" ‚Üí +15 trust, —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
   - ‚úÖ –û—Å–∫–æ—Ä–±–ª–µ–Ω–∏–µ –¥–æ—á–µ—Ä–∏ ‚Üí –ù–ï —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç

3. **–ü–æ–º–æ—â–Ω–∏–∫:**
   - ‚úÖ –ù–ï —É–ø–æ–º–∏–Ω–∞–µ—Ç —á—Ç–æ –í–∏–∫—Ç–æ—Ä —É–±–∏–π—Ü–∞ (–±–µ–∑ —É–ª–∏–∫)
   - ‚úÖ –ù–ï –≥–æ–≤–æ—Ä–∏—Ç –ø—Ä–æ —è–¥/–≤–∏—Å–∫–∏ (–±–µ–∑ —É–ª–∏–∫)
   - ‚úÖ –î–∞—ë—Ç —Ç–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

4. **–ë–∏–æ–≥—Ä–∞—Ñ–∏—è –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞:**
   - ‚úÖ –£–±—Ä–∞–Ω—ã –≤—Å–µ —Å–ø–æ–π–ª–µ—Ä—ã (—Ä–æ–º–∞–Ω –ê–Ω–Ω—ã, —É–±–∏–π—Å—Ç–≤–æ –í–∏–∫—Ç–æ—Ä–∞)

---

## ‚ö†Ô∏è –ò–ó–í–ï–°–¢–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

### –ü–∞—Ä—Å–µ—Ä JSON –∏–Ω–æ–≥–¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º:** AI –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å trustChange: -30, –Ω–æ –ø–∞—Ä—Å–µ—Ä –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π

**–í–∏–¥–Ω–æ –≤ –ª–æ–≥–∞—Ö:**
```
[parseAnalysisResponse] Failed to parse: {
  "trustChange": -30,    ‚Üê AI –ü–†–ê–í–ò–õ–¨–ù–û –≤–µ—Ä–Ω—É–ª -30!
  "newEmotion": "anger",
  ...
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è fallback —Å trustChange: 0

**–ü—Ä–∏—á–∏–Ω–∞:** –í–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤:
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AI
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–∏ –º–æ–¥—É–ª–µ–π Next.js
- –ù–µ–≤–∏–¥–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–∞—Ö –≤ –æ—Ç–≤–µ—Ç–µ AI

**–°—Ç–∞—Ç—É—Å:** –¢–†–ï–ë–£–ï–¢ –ì–õ–£–ë–û–ö–û–ì–û –ò–ó–£–ß–ï–ù–ò–Ø

**–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- –ò–≥—Ä–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ –∏–≥—Ä–∞–±–µ–ª—å–Ω–∞
- –ü—Ä–æ–º–ø—Ç—ã –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É—Å–∏–ª–µ–Ω—ã –¥–ª—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏
- –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–ª—É—á–∞–µ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üéØ –ò–¢–û–ì–û–í–´–ô –í–ï–†–î–ò–ö–¢

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: 5 –∏–∑ 6 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

1. ‚úÖ –°–∏—Å—Ç–µ–º–∞ —É–ª–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ –°–ø–æ–π–ª–µ—Ä—ã —É–±—Ä–∞–Ω—ã –∏–∑ –±–∏–æ–≥—Ä–∞—Ñ–∏–∏
3. ‚úÖ –ë–æ—Ä–∏—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–µ–∂–ª–∏–≤–æ—Å—Ç—å
4. ‚úÖ –ü–æ–º–æ—â–Ω–∏–∫ –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —Å–ø–æ–π–ª–µ—Ä—ã
5. ‚úÖ –ü—Ä–æ–º–ø—Ç—ã —É—Å–∏–ª–µ–Ω—ã
6. ‚ö†Ô∏è –ü–∞—Ä—Å–µ—Ä JSON - —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø. –∏–∑—É—á–µ–Ω–∏—è

**–ò–≥—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!**

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã:
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —É–ª–∏–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ AI –Ω–µ –∑–Ω–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç—ã –∑–∞—Ä–∞–Ω–µ–µ
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ë–∞–ª–∞–Ω—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

---

## üìÅ –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´

1. `app/chat/[character]/page.tsx` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —É–ª–∏–∫
2. `lib/prompts.ts` - —É–±—Ä–∞–Ω—ã —Å–ø–æ–π–ª–µ—Ä—ã –∏–∑ –±–∏–æ–≥—Ä–∞—Ñ–∏–π
3. `data/prompts/boris-base.txt` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–∂–ª–∏–≤–æ—Å—Ç–∏
4. `data/prompts/helper-base.txt` - —É–±—Ä–∞–Ω—ã —Å–ø–æ–π–ª–µ—Ä—ã
5. `data/prompts/analyzer.txt` - —É—Å–∏–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ –æ—Ü–µ–Ω–∫–∏
6. `lib/ai-client.ts` - —É–ª—É—á—à–µ–Ω –ø–∞—Ä—Å–µ—Ä JSON

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏–≥—Ä–µ!** üéÆ
